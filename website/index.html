<!DOCTYPE html>
<html>
<head>
	<title>Memuy</title>
	<style>
	#file-container {
		background: #ccc;
		padding: 20px;
	}
	</style>
</head>
<body>
	<ul id="messages"></ul>

	<form action="">
    	<input id="m" autocomplete="off" /><button>Send</button>
    </form>

    <br/>

    <div id="file-container">
		<ul id="files" class="dropzone-previews">
			<li>Teste 1</li>
			<li>Teste 2</li>
		</ul>
	</div>

	<script src="http://localhost:5010/socket.io/socket.io.js"></script>
	<script src="http://code.jquery.com/jquery-1.11.1.js"></script>
	<script src="/assets/js/dropzone.js"></script>

	<script>
	var socket = io('http://localhost:5010');

	socket.emit('getKey');

	socket.on('key', function(msg){
	    $('#messages').append($('<li>').text(msg));
	});	

	$('form').submit(function(){
		socket.emit('tryKey', $('#m').val());
		$('#m').val('');
		return false;
	});


	var myDropzone = new Dropzone("div#file-container", {
		method: 'post', 
		url: "http://localhost:5010/files",
		previewsContainer: ".dropzone-previews",
		previewTemplate: '<li>Novo arquivo</li>',
		clickable: false
	});
	</script>
</body>
</html>